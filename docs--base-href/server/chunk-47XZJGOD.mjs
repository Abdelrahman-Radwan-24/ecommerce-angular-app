import './polyfills.server.mjs';
import{a as j,b as z,c as N,d as G}from"./chunk-BXG467Y3.mjs";import{a as w}from"./chunk-6UY76SPT.mjs";import{a as R}from"./chunk-3HL35OMC.mjs";import{a as $}from"./chunk-P5KBVKKK.mjs";import"./chunk-CBYSDMSX.mjs";import{a as B}from"./chunk-PC7GOQG3.mjs";import"./chunk-J4BDXTMW.mjs";import{c as A,d as H}from"./chunk-JLIJJ3UE.mjs";import{h as L}from"./chunk-MIFLSWE4.mjs";import{Db as l,Eb as u,Fb as C,Ka as D,Kb as W,Lb as k,Mb as E,Nb as M,Pa as o,Rb as x,Sb as y,Tb as O,W as d,_ as T,eb as _,gb as h,ia as m,ja as p,kb as P,lb as I,mb as S,nb as g,ob as n,pb as s,qb as b,tb as f,vb as v,wb as a,xc as F,zc as V}from"./chunk-Q4WC6RBB.mjs";import"./chunk-VVCT4QZE.mjs";function U(i,c){return this.detailsProduct.id}var q=()=>[1,2,3,4,5],J=i=>({width:i});function K(i,c){if(i&1&&b(0,"img",16),i&2){let t=a().$implicit,e=a(2);h("src",t,D)("alt",e.detailsProduct.title)}}function Q(i,c){i&1&&_(0,K,1,2,"ng-template",4)}function X(i,c){if(i&1&&(n(0,"div",11),b(1,"i",17)(2,"i",18),s()),i&2){let t=c.$implicit,e=a(2);o(2),h("ngStyle",M(1,J,e.getStarWidth(t,e.detailsProduct.ratingsAverage)))}}function Y(i,c){if(i&1){let t=f();n(0,"i",19),v("click",function(){m(t);let r=a(2);return p(r.removeWishlist(r.detailsProduct.id))}),s()}}function Z(i,c){if(i&1){let t=f();n(0,"i",20),v("click",function(){m(t);let r=a(2);return p(r.addWishlist(r.detailsProduct.id))}),s()}}function tt(i,c){if(i&1){let t=f();n(0,"section",0)(1,"h1"),l(2),x(3,"translate"),s(),n(4,"div",1)(5,"div",2)(6,"div")(7,"owl-carousel-o",3),S(8,Q,1,0,null,4,U,!0),s()()(),n(10,"div",5)(11,"div")(12,"h3",6),l(13),s(),n(14,"p",7),l(15),s(),n(16,"h5",8),l(17),s(),n(18,"div",9)(19,"span"),l(20),x(21,"currency"),s(),n(22,"div",10),S(23,X,3,3,"div",11,I),n(25,"span",12),l(26),s()(),n(27,"span",13),_(28,Y,1,0,"i",14)(29,Z,1,0),s()(),n(30,"button",15),v("click",function(){m(t);let r=a();return p(r.addCart(r.detailsProduct.id))}),l(31),x(32,"translate"),s()()()()()}if(i&2){let t=a();o(2),C("",y(3,9,"DetailsProduct.Details Product")," :"),o(5),h("options",t.customOptionsDetails),o(),g(t.detailsProduct.images),o(5),u(t.detailsProduct.title),o(2),u(t.detailsProduct.description),o(2),u(t.detailsProduct.category.name),o(3),C(" ",O(21,11,t.detailsProduct.price,"GBP"),""),o(3),g(E(16,q)),o(3),u(t.detailsProduct.ratingsAverage),o(2),P(28,t.detailsProduct.wished?28:29),o(3),C(" ",y(32,14,"DetailsProduct.Add To Cart")," ")}}var ht=(()=>{class i{constructor(){this._ActivatedRoute=d(L),this._ProductsService=d(G),this._LocalStorageHandler=d(w),this._WishlistService=d(R),this._CartService=d($),this._ToastrService=d(B),this.detailsProduct=null,this.customOptionsDetails={loop:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!1,dots:!0,rtl:!0,autoplay:!0,autoplayTimeout:1e3,autoplayHoverPause:!0,navSpeed:700,navText:[],responsive:{0:{items:1},400:{items:1},740:{items:1},940:{items:1}},nav:!1}}ngOnInit(){this.paramId=this._ActivatedRoute.paramMap.subscribe({next:t=>{let e=t.get("id");this.product=this._ProductsService.getSpecificProduct(e).subscribe({next:r=>{r.status==200&&(this.detailsProduct=r.body.data,this.detailsProduct.wished=this._LocalStorageHandler.checkItem("wishList",this.detailsProduct.id))}})}})}getStarWidth(t,e){return e>=t?"100%":e<t&&e>t-1?`${(e-(t-1))*100}%`:"0%"}removeWishlist(t){this.removeItem=this._WishlistService.RemoveProductFromWishlist(t).subscribe({next:e=>{e.status==200&&(this._ToastrService.success("Product removed successfully from your wishlist"),this._WishlistService.countWishlist.set(e.body.data.length),this.detailsProduct.id==t&&(this.detailsProduct.wished=!1),this._LocalStorageHandler.removeItem("wishList",t))}})}addWishlist(t){this.wishlistItem=this._WishlistService.addProductToWishlist(t).subscribe({next:e=>{e.status==200&&(this._ToastrService.success("Product added successfully to your wishlist"),this._WishlistService.countWishlist.set(e.body.data.length),this.detailsProduct.id==t&&(this.detailsProduct.wished=!0),this._LocalStorageHandler.pushItem("wishList",t))}})}addCart(t){this.addToCart=this._CartService.addProductToCart(t).subscribe({next:e=>{e.status==200&&(this._ToastrService.success("Product is added successfully to your Cart"),this._CartService.cartNumber.set(e.body.numOfCartItems))}})}ngOnDestroy(){this.paramId?.unsubscribe(),this.product?.unsubscribe(),this.removeItem?.unsubscribe(),this.wishlistItem?.unsubscribe(),this.addToCart?.unsubscribe()}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=T({type:i,selectors:[["app-details"]],standalone:!0,features:[W([w]),k],decls:1,vars:1,consts:[[1,"mt-5"],[1,"row","align-items-center"],[1,"col-md-4"],[3,"options"],["carouselSlide",""],[1,"col-md-8"],[1,"h4"],[1,"text-muted"],[1,"h6"],[1,"d-flex","justify-content-between","align-items-center"],[1,"d-flex","align-items-center"],[1,"star-container"],[1,"ms-1"],[1,"c-p"],[1,"fa-solid","fa-heart","text-danger","fa-2xl"],[1,"btn-main","w-100","my-2","rounded-4",3,"click"],[1,"w-100",3,"src","alt"],[1,"fa","fa-star"],[1,"fa","fa-star","filled",3,"ngStyle"],[1,"fa-solid","fa-heart","text-danger","fa-2xl",3,"click"],[1,"fa-regular","fa-heart","text-danger","fa-2xl",3,"click"]],template:function(e,r){e&1&&_(0,tt,33,17,"section",0),e&2&&P(0,r.detailsProduct?0:-1)},dependencies:[F,N,z,j,V,H,A],styles:[".star-container[_ngcontent-%COMP%]{position:relative;display:inline-block}.star-container[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px;color:#ccc}.star-container[_ngcontent-%COMP%]   .filled[_ngcontent-%COMP%]{position:absolute;top:0;left:0;overflow:hidden;color:gold}"]})}}return i})();export{ht as DetailsComponent};
