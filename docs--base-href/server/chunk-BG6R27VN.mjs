import './polyfills.server.mjs';
import{a as J}from"./chunk-W74PIALP.mjs";import{a as L,b as _,c as G,d as Y,f as W,g as j,h as z,i as $,j as H,l as Z}from"./chunk-T6R2W34F.mjs";import"./chunk-CBYSDMSX.mjs";import{a as V}from"./chunk-PC7GOQG3.mjs";import"./chunk-J4BDXTMW.mjs";import{c as A,d as D}from"./chunk-JLIJJ3UE.mjs";import{h as N,k as R,l as q}from"./chunk-MIFLSWE4.mjs";import{Db as a,Eb as f,Fb as h,Gb as M,Lb as T,Ob as b,Pa as i,Rb as c,Sb as u,W as F,_ as P,eb as k,gb as x,kb as g,ob as l,pb as o,qb as C,uc as w,vb as B,wb as S}from"./chunk-Q4WC6RBB.mjs";import"./chunk-VVCT4QZE.mjs";var E=(e,m)=>({"is-valid":e,"is-invalid":m});function K(e,m){e&1&&(l(0,"p",21),a(1),c(2,"translate"),o()),e&2&&(i(),f(u(2,1,"checkOut.Phone Is Required")))}function Q(e,m){e&1&&(l(0,"p",21),a(1),c(2,"translate"),o()),e&2&&(i(),f(u(2,1,"checkOut.Enter Valid Phone")))}function U(e,m){if(e&1&&(l(0,"div",10),k(1,K,3,3,"p",21)(2,Q,3,3),o()),e&2){let n,r=S();i(),g(1,(n=r.checkOutForms.get("phone"))!=null&&n.getError("required")?1:(n=r.checkOutForms.get("phone"))!=null&&n.getError("pattern")?2:-1)}}function X(e,m){e&1&&(l(0,"p",21),a(1),c(2,"translate"),o()),e&2&&(i(),f(u(2,1,"checkOut.City Is Required")))}function ee(e,m){e&1&&(l(0,"p",21),a(1),c(2,"translate"),o()),e&2&&(i(),h(" ",u(2,1,"checkOut.must be at least 4 characters")," "))}function te(e,m){e&1&&(l(0,"p",21),a(1),c(2,"translate"),o()),e&2&&(i(),h(" ",u(2,1,"checkOut.must be at least 20 characters")," "))}function ie(e,m){e&1&&(l(0,"p",21),a(1),c(2,"translate"),o()),e&2&&(i(),f(u(2,1,"checkOut.Enter Valid City")))}function ne(e,m){if(e&1&&(l(0,"div",10),k(1,X,3,3,"p",21)(2,ee,3,3)(3,te,3,3)(4,ie,3,3),o()),e&2){let n,r=S();i(),g(1,(n=r.checkOutForms.get("city"))!=null&&n.getError("required")?1:(n=r.checkOutForms.get("city"))!=null&&n.getError("minlength")?2:(n=r.checkOutForms.get("city"))!=null&&n.getError("maxlength")?3:(n=r.checkOutForms.get("city"))!=null&&n.getError("pattern")?4:-1)}}function le(e,m){e&1&&(l(0,"p",21),a(1),c(2,"translate"),o()),e&2&&(i(),f(u(2,1,"checkOut.Details Is Required")))}function oe(e,m){e&1&&(l(0,"p",21),a(1),c(2,"translate"),o()),e&2&&(i(),h(" ",u(2,1,"checkOut.Adders Must be at least 10 characters")," "))}function re(e,m){if(e&1&&(l(0,"div",10),k(1,le,3,3,"p",21)(2,oe,3,3),o()),e&2){let n,r=S();i(),g(1,(n=r.checkOutForms.get("details"))!=null&&n.getError("required")?1:(n=r.checkOutForms.get("details"))!=null&&n.getError("minlength")?2:-1)}}var Ce=(()=>{class e{constructor(){this._FormBuilder=F(H),this._OrdersService=F(J),this._ActivatedRoute=F(N),this._Router=F(R),this._ToastrService=F(V),this.checkId="",this.checkOutForms=this._FormBuilder.group({phone:[null,[_.required,_.pattern(/^01[0125][0-9]{8}$/)]],city:[null,[_.required,_.minLength(4),_.maxLength(20),_.pattern(/^(?:[A-Za-z]+\s?){4,20}$/)]],details:[null,[_.required,_.minLength(10)]],paymentMethod:["",_.required]})}ngOnInit(){this.param=this._ActivatedRoute.paramMap.subscribe({next:n=>{this.checkId=n.get("id")}})}cashPayment(){if(this.checkOutForms.valid){let n=this.checkOutForms.get("paymentMethod").value;n==="cashPayment"?this.cash=this._OrdersService.cashOrder(this.checkId,this.checkOutForms.value).subscribe({next:r=>{r.status==201&&(this._ToastrService.success("Your Order Is Placed Successfully"),this._Router.navigate(["/allorders"]))}}):n==="onlinePayment"&&(this.online=this._OrdersService.onlineOrder(this.checkId,this.checkOutForms.value).subscribe({next:r=>{r.status==200&&(this._ToastrService.success("Your Order Is Placed Successfully"),window.open(r.body.session.url,"_self"))}}))}}ngOnDestroy(){this.cash?.unsubscribe(),this.online?.unsubscribe(),this.param?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275cmp=P({type:e,selectors:[["app-checkout"]],standalone:!0,features:[T],decls:43,vars:42,consts:[[1,"bg-main-light","shadow","p-5","mt-5","rounded-4"],["routerLink","/cart",1,"text-main","c-p"],[1,"row","align-items-center","justify-content-center"],[1,"col-md-6"],["src","./assets/images/payment.png","alt","payment-logo",1,"w-100","rounded-4"],[1,"text-center"],[3,"ngSubmit","formGroup"],[1,"my-2"],["for","phone"],["formControlName","phone","id","phone","type","tel","placeholder","Phone Number...","dir","auto",1,"form-control",3,"ngClass"],[1,"alert","alert-danger"],["for","city"],["formControlName","city","id","city","type","text","placeholder","Write Your City...","dir","auto",1,"form-control",3,"ngClass"],["for","details"],["rows","3","formControlName","details","id","details","placeholder","Write Your Address Here...","dir","auto",1,"form-control",3,"ngClass"],[1,"form-check","my-4"],["formControlName","paymentMethod","id","cashPyment","value","cashPayment","type","radio",1,"form-check-input"],["for","cashPyment",1,"form-check-label"],["formControlName","paymentMethod","id","onlinePyment","value","onlinePayment","type","radio",1,"form-check-input"],["for","onlinePyment",1,"form-check-label"],["type","submit",1,"btn-main","my-2","w-100","rounded-4",3,"disabled"],[1,"m-0"]],template:function(r,t){if(r&1&&(l(0,"section",0)(1,"h5",1),a(2),c(3,"translate"),o(),l(4,"div",2)(5,"div",3),C(6,"img",4),o(),l(7,"div",3)(8,"h1",5),a(9),c(10,"translate"),o(),l(11,"form",6),B("ngSubmit",function(){return t.cashPayment()}),l(12,"div",7)(13,"label",8),a(14),c(15,"translate"),o(),C(16,"input",9),k(17,U,3,1,"div",10),o(),l(18,"div",7)(19,"label",11),a(20),c(21,"translate"),o(),C(22,"input",12),k(23,ne,5,1,"div",10),o(),l(24,"div",7)(25,"label",13),a(26),c(27,"translate"),o(),C(28,"textarea",14),k(29,re,3,1,"div",10),o(),l(30,"div",15),C(31,"input",16),l(32,"label",17),a(33),c(34,"translate"),o()(),l(35,"div",15),C(36,"input",18),l(37,"label",19),a(38),c(39,"translate"),o()(),l(40,"button",20),a(41),c(42,"translate"),o()()()()()),r&2){let s,O,d,v,p,y,I;i(2),h(" ",u(3,17,"checkOut.Back")," "),i(7),f(u(10,19,"checkOut.Checkout")),i(2),x("formGroup",t.checkOutForms),i(3),h(" ",u(15,21,"checkOut.phone")," :"),i(2),x("ngClass",b(33,E,!((s=t.checkOutForms.get("phone"))!=null&&s.errors)&&(((s=t.checkOutForms.get("phone"))==null?null:s.touched)||((s=t.checkOutForms.get("phone"))==null?null:s.dirty)),((s=t.checkOutForms.get("phone"))==null?null:s.errors)&&(((s=t.checkOutForms.get("phone"))==null?null:s.touched)||((s=t.checkOutForms.get("phone"))==null?null:s.dirty)))),i(),g(17,(O=t.checkOutForms.get("phone"))!=null&&O.errors&&((O=t.checkOutForms.get("phone"))!=null&&O.touched||(O=t.checkOutForms.get("phone"))!=null&&O.dirty)?17:-1),i(3),h(" ",u(21,23,"checkOut.city")," :"),i(2),x("ngClass",b(36,E,!((d=t.checkOutForms.get("city"))!=null&&d.errors)&&(((d=t.checkOutForms.get("city"))==null?null:d.touched)||((d=t.checkOutForms.get("city"))==null?null:d.dirty)),((d=t.checkOutForms.get("city"))==null?null:d.errors)&&(((d=t.checkOutForms.get("city"))==null?null:d.touched)||((d=t.checkOutForms.get("city"))==null?null:d.dirty)))),i(),g(23,(v=t.checkOutForms.get("city"))!=null&&v.errors&&((v=t.checkOutForms.get("city"))!=null&&v.touched||(v=t.checkOutForms.get("city"))!=null&&v.dirty)?23:-1),i(3),h(" ",u(27,25,"checkOut.Details")," :"),i(2),x("ngClass",b(39,E,!((p=t.checkOutForms.get("details"))!=null&&p.errors)&&(((p=t.checkOutForms.get("details"))==null?null:p.touched)||((p=t.checkOutForms.get("details"))==null?null:p.dirty)),((p=t.checkOutForms.get("details"))==null?null:p.errors)&&(((p=t.checkOutForms.get("details"))==null?null:p.touched)||((p=t.checkOutForms.get("details"))==null?null:p.dirty)))),i(),g(29,(y=t.checkOutForms.get("details"))!=null&&y.errors&&((y=t.checkOutForms.get("details"))!=null&&y.touched||(y=t.checkOutForms.get("details"))!=null&&y.dirty)?29:-1),i(4),h(" ",u(34,27,"checkOut.Cash Payment")," "),i(5),h(" ",u(39,29,"checkOut.Online Payment")," "),i(2),x("disabled",t.checkOutForms.invalid),i(),M(" ",u(42,31,"checkOut.Continue With")," ",(I=t.checkOutForms.get("paymentMethod"))==null?null:I.value," ")}},dependencies:[Z,W,L,j,G,Y,z,$,w,q,D,A],styles:[".form-control[_ngcontent-%COMP%]:focus{box-shadow:5px 5px var(--main-color);border-color:var(--main-color)}[_ngcontent-%COMP%]::placeholder{color:var(--main-color)}@media (max-width: 767px){.row[_ngcontent-%COMP%]{display:flex;flex-direction:column-reverse}button[_ngcontent-%COMP%]{width:100%}}@media (min-width: 767px) and (max-width: 1025px){.row[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse}h1[_ngcontent-%COMP%]{font-size:1.875rem}button[_ngcontent-%COMP%]{width:100%}}"]})}}return e})();export{Ce as CheckoutComponent};
