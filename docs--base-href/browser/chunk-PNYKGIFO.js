import{a as Y}from"./chunk-AXVVEF4H.js";import{a as Z}from"./chunk-EKC6G6NT.js";import{c as X,d as tt}from"./chunk-OU37R2VZ.js";import{a as W}from"./chunk-HFODZOJB.js";import{a as G,c as U,e as q,k as J}from"./chunk-RF2HPMBN.js";import{l as R}from"./chunk-AJYFC62G.js";import{a as Q}from"./chunk-OCY5CQ2Q.js";import{a as K}from"./chunk-4WTYT7R5.js";import"./chunk-NI4CGMN2.js";import{h as N}from"./chunk-ZPOAEXIQ.js";import{c as j,d as z}from"./chunk-XBV2T4CO.js";import{Ab as E,Bb as m,Db as O,Eb as A,Fb as B,Ga as M,Gb as I,Hb as V,Ib as H,Jb as y,La as o,Nb as d,Ob as b,Pb as h,W as p,Z as T,ab as L,cb as g,gb as k,ha as _,hb as F,ia as f,ib as S,jb as w,jc as $,kb as n,lb as s,lc as D,mb as P,pb as v,rb as x,sb as a,zb as l}from"./chunk-4CAZKJUL.js";import"./chunk-CWTPBX7D.js";var et=(i,c)=>c.id,it=i=>["/details",i],rt=()=>[1,2,3,4,5],nt=i=>({width:i});function ot(i,c){if(i&1&&(n(0,"div",11),P(1,"i",16)(2,"i",17),s()),i&2){let t=c.$implicit,e=a().$implicit,r=a();o(2),g("ngStyle",y(1,nt,r.getStarWidth(t,e.ratingsAverage)))}}function st(i,c){if(i&1){let t=v();n(0,"i",18),x("click",function(){_(t);let r=a().$implicit,u=a();return f(u.removeWishlist(r.id))}),s()}}function at(i,c){if(i&1){let t=v();n(0,"i",19),x("click",function(){_(t);let r=a().$implicit,u=a();return f(u.addWishlist(r.id))}),s()}}function ct(i,c){if(i&1){let t=v();n(0,"div",3)(1,"div",4)(2,"div",5),P(3,"img",6)(4,"hr"),n(5,"h3",7),l(6),d(7,"termtext"),s(),n(8,"h4",8),l(9),d(10,"termtext"),s(),n(11,"div",9)(12,"span"),l(13),d(14,"currency"),s(),n(15,"div",10),S(16,ot,3,3,"div",11,F),n(18,"span",12),l(19),s()()()(),n(20,"div",13)(21,"button",14),x("click",function(){let r=_(t).$implicit,u=a();return f(u.addCart(r.id))}),l(22),d(23,"translate"),s(),n(24,"span"),L(25,st,1,0,"i",15)(26,at,1,0),s()()()()}if(i&2){let t=c.$implicit;o(2),g("routerLink",y(20,it,t.id)),o(),g("src",t.imageCover,M)("alt",t.category.name),o(3),m(" ",h(7,9,t.category.name,2)," "),o(3),m(" ",h(10,12,t.title,2)," "),o(4),m(" ",h(14,15,t.price,"GBP"),""),o(3),w(H(22,rt)),o(3),E(t.ratingsAverage),o(3),m(" ",b(23,18,"owlProducts.Add To Cart")," "),o(3),k(25,t.wished?25:26)}}var Wt=(()=>{class i{constructor(){this._ProductsService=p(tt),this._CartService=p(K),this._ToastrService=p(R),this._WishlistService=p(Q),this._localStorageHandler=p(W),this.productsList=[],this.search=""}ngOnInit(){this.getAllProductsSub=this._ProductsService.getAllProducts().subscribe({next:t=>{t.status==200&&(this.productsList=t.body.data,this.initWishedProducts())}})}initWishedProducts(){(this._localStorageHandler.getItem("wishList")??{localData:[]})!=null&&this.productsList.forEach(e=>{this._localStorageHandler.checkItem("wishList",e.id)?e.wished=!0:e.wished=!1})}getStarWidth(t,e){return e>=t?"100%":e<t&&e>t-1?`${(e-(t-1))*100}%`:"0%"}addCart(t){this.cart=this._CartService.addProductToCart(t).subscribe({next:e=>{e.status==200&&(this._ToastrService.success("Product is added successfully to your Cart"),this._CartService.cartNumber.set(e.body.numOfCartItems))}})}removeWishlist(t){this.wishlist=this._WishlistService.RemoveProductFromWishlist(t).subscribe({next:e=>{e.status==200&&(this._ToastrService.success("Product removed successfully from your wishlist"),this._WishlistService.countWishlist.set(e.body.data.length),this.productsList.find(r=>r.id==t).wished=!1,this._localStorageHandler.removeItem("wishList",t))}})}addWishlist(t){this.wishlistAdd=this._WishlistService.addProductToWishlist(t).subscribe({next:e=>{e.status==200&&(this._ToastrService.success("Product added successfully to your wishlist"),this._WishlistService.countWishlist.set(e.body.data.length),this.productsList.find(r=>r.id==t).wished=!0,this._localStorageHandler.pushItem("wishList",t))}})}ngOnDestroy(){this.getAllProductsSub?.unsubscribe(),this.cart?.unsubscribe(),this.wishlist?.unsubscribe(),this.wishlistAdd?.unsubscribe()}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=T({type:i,selectors:[["app-products"]],standalone:!0,features:[I([W]),V],decls:9,vars:7,consts:[[1,"mt-5"],["id","search-input","type","search","placeholder","Search By Name...","dir","auto",1,"form-control","w-50","mx-auto","my-3",3,"ngModelChange","ngModel"],[1,"row","g-3"],[1,"col-sm-12","col-md-6","col-lg-4","col-xl-3"],[1,"product","p-3","c-p"],[3,"routerLink"],[1,"w-100",3,"src","alt"],[1,"h5","text-main","fw-bold"],[1,"h6","fw-bold"],[1,"d-flex","justify-content-between","align-items-center"],[1,"d-flex","align-items-center"],[1,"star-container"],[1,"ms-1"],[1,"d-flex","justify-content-between","align-items-center","gap-2"],[1,"btn-main","w-100","my-1","rounded-4",3,"click"],[1,"fa-solid","fa-heart","text-danger","fa-2xl"],[1,"fa","fa-star"],[1,"fa","fa-star","filled",3,"ngStyle"],[1,"fa-solid","fa-heart","text-danger","fa-2xl",3,"click"],[1,"fa-regular","fa-heart","text-danger","fa-2xl",3,"click"]],template:function(e,r){e&1&&(n(0,"section",0)(1,"h1"),l(2),d(3,"translate"),s(),n(4,"input",1),B("ngModelChange",function(C){return A(r.search,C)||(r.search=C),C}),s(),n(5,"div",2),S(6,ct,27,23,"div",3,et),d(8,"search"),s()()),e&2&&(o(2),m("",b(3,2,"owlProducts.All Products")," :"),o(2),O("ngModel",r.search),o(2),w(h(8,4,r.productsList,r.search)))},dependencies:[$,X,N,Z,Y,J,G,U,q,z,j,D],styles:[".star-container[_ngcontent-%COMP%]{position:relative;display:inline-block}.star-container[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px;color:#ccc}.star-container[_ngcontent-%COMP%]   .filled[_ngcontent-%COMP%]{position:absolute;top:0;left:0;overflow:hidden;color:gold}.form-control[_ngcontent-%COMP%]:focus{box-shadow:5px 5px var(--main-color);border-color:var(--main-color)}[_ngcontent-%COMP%]::placeholder{color:var(--main-color)}@media (max-width: 768px){#search-input[_ngcontent-%COMP%]{width:100%!important}}"]})}}return i})();export{Wt as ProductsComponent};
