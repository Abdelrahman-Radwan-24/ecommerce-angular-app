import{a as W}from"./chunk-EKC6G6NT.js";import{a as X}from"./chunk-TUWNLC66.js";import{l as Y}from"./chunk-AJYFC62G.js";import{a as $}from"./chunk-4WTYT7R5.js";import"./chunk-NI4CGMN2.js";import{h as K}from"./chunk-ZPOAEXIQ.js";import{c as N,d as U}from"./chunk-XBV2T4CO.js";import{Ab as I,Bb as p,Cb as _,Ga as L,Hb as M,Jb as E,La as o,Nb as l,Ob as d,Pb as b,Q as P,R as T,T as v,V as k,W as O,Z as x,_ as A,ab as B,cb as C,gb as R,ha as f,ia as w,ib as V,jb as j,kb as a,lb as r,lc as F,mb as g,mc as H,pb as D,rb as u,sb as m,zb as c}from"./chunk-4CAZKJUL.js";import{e as Q}from"./chunk-CWTPBX7D.js";var S=new v("@sweetalert2/ngx-sweetalert2#swalProvider"),z=new v("@sweetalert2/ngx-sweetalert2#fireOnInit"),G=new v("@sweetalert2/ngx-sweetalert2#dismissOnDestroy"),q=(()=>{class e{swalProvider;swalPromiseCache;constructor(t){this.swalProvider=t}get swal(){return this.swalPromiseCache||this.preloadSweetAlertLibrary(),this.swalPromiseCache}preloadSweetAlertLibrary(){if(this.swalPromiseCache)return;let t=i(this.swalProvider)?this.swalProvider():Promise.resolve(this.swalProvider);this.swalPromiseCache=t.then(s=>n(s)?s:s.default);function i(s){return typeof s=="function"&&s.version===void 0}function n(s){return typeof s=="function"}}static \u0275fac=function(i){return new(i||e)(k(S))};static \u0275prov=P({token:e,factory:e.\u0275fac})}return e})();function tt(){return import("./chunk-OIE5SRMG.js")}var J=(()=>{class e{static forRoot(t={}){return{ngModule:e,providers:[q,{provide:S,useValue:t.provideSwal||tt},{provide:z,useValue:t.fireOnInit||!1},{provide:G,useValue:t.dismissOnDestroy||!0}]}}static forChild(t={}){return{ngModule:e,providers:[...t.provideSwal?[q,{provide:S,useValue:t.provideSwal}]:[],...t.fireOnInit!==void 0?[{provide:z,useValue:t.fireOnInit}]:[],...t.dismissOnDestroy!==void 0?[{provide:G,useValue:t.dismissOnDestroy}]:[]]}}static \u0275fac=function(i){return new(i||e)};static \u0275mod=A({type:e});static \u0275inj=T({imports:[H]})}return e})();var y=Q(X());var et=(e,h)=>h.product.id,it=e=>["/checkout",e];function nt(e,h){if(e&1){let t=D();a(0,"div",4)(1,"div",6),g(2,"img",7),r(),a(3,"div",8)(4,"div")(5,"h3",9),c(6),l(7,"termtext"),r(),a(8,"h4",2),c(9),l(10,"translate"),l(11,"currency"),r(),a(12,"span",10),u("click",function(){let n=f(t).$implicit,s=m(2);return w(s.deleteItem(n.product.id))}),g(13,"i",11),c(14),l(15,"translate"),r()(),a(16,"div",12)(17,"span",13),u("click",function(){let n=f(t).$implicit,s=m(2);return w(s.updateCart(n.product.id,n.count+1))}),g(18,"i",14),r(),a(19,"span"),c(20),r(),a(21,"span",13),u("click",function(){let n=f(t).$implicit,s=m(2);return w(s.updateCart(n.product.id,n.count-1))}),g(22,"i",15),r()()()()}if(e&2){let t=h.$implicit;o(2),C("src",t.product.imageCover,L)("alt",t.product.title),o(4),I(b(7,7,t.product.title,2)),o(3),_(" ",d(10,10,"cart.Price")," : ",b(11,12,t.price,"GBP")," "),o(5),p(" ",d(15,15,"cart.Remove")," "),o(6),p(" ",t.count," ")}}function ot(e,h){if(e&1){let t=D();a(0,"div",1)(1,"h3",2),c(2),l(3,"translate"),l(4,"currency"),r(),a(5,"button",3),u("click",function(){f(t);let n=m();return w(n.confirmClearCart())}),c(6),l(7,"translate"),r()(),V(8,nt,23,17,"div",4,et),a(10,"button",5),c(11),l(12,"translate"),r()}if(e&2){let t=m();o(2),_(" ",d(3,6,"cart.Total Cart Price")," : ",b(4,8,t.getCart.totalCartPrice,"GBP")," "),o(3),C("disabled",t.isCartEmpty),o(),p(" ",d(7,11,"cart.Clear All")," "),o(2),j(t.getCart.products),o(2),C("routerLink",E(15,it,t.getCart._id)),o(),p(" ",d(12,13,"cart.Checkout")," ")}}function rt(e,h){e&1&&(a(0,"div",16)(1,"h1",17),c(2),l(3,"translate"),r(),a(4,"button",18),c(5),l(6,"translate"),r()()),e&2&&(o(2),I(d(3,2,"cart.your Cart Is Empty")),o(3),p(" ",d(6,4,"cart.Go to Shopping")," "))}var Yt=(()=>{class e{constructor(){this._CartService=O($),this._ToastrService=O(Y),this.getCart={}}get isCartEmpty(){return!this.getCart.products||this.getCart.products.length===0}ngOnInit(){this.productCart=this._CartService.getProductsCart().subscribe({next:t=>{t.status==200&&t.body.data.products.length&&(this.getCart=t.body.data)}})}deleteItem(t){y.default.fire({title:"Are You Sure?",text:"Do you really want to Remove the Product ? This action cannot be undone!",icon:"warning",showCancelButton:!0,cancelButtonText:"Cancel",confirmButtonText:"Yes, Remove it!"}).then(i=>{i.isConfirmed&&(this.removeItem(t),y.default.fire("Removed!","Your Product has been Removed.","success"))})}removeItem(t){this.removeItemToCart=this._CartService.removeSpecificCartItem(t).subscribe({next:i=>{i.status==200&&(this.getCart=i.body.data,this._CartService.cartNumber.set(i.body.numOfCartItems))}})}updateCart(t,i){i>0&&(this.updateItem=this._CartService.updateProductCart(t,i).subscribe({next:n=>{n.status==200&&(this._ToastrService.success("Product is updated successfully"),this.getCart=n.body.data)}}))}clearCart(){this.clearAll=this._CartService.clearUserCart().subscribe({next:t=>{t.status==200&&(this.getCart=t,this._CartService.cartNumber.set(0))}})}confirmClearCart(){y.default.fire({title:"Are You Sure?",text:"Do you really want to clear the cart? This action cannot be undone!",icon:"warning",showCancelButton:!0,cancelButtonText:"Cancel",confirmButtonText:"Yes, clear it!"}).then(t=>{t.isConfirmed&&(this.clearCart(),y.default.fire("Cleared!","Your cart has been cleared.","success"))})}ngOnDestroy(){this.productCart?.unsubscribe(),this.removeItemToCart?.unsubscribe(),this.updateItem?.unsubscribe(),this.clearAll?.unsubscribe()}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=x({type:e,selectors:[["app-cart"]],standalone:!0,features:[M],decls:6,vars:4,consts:[[1,"cart","w-75","mx-auto","mt-5"],[1,"total-price","d-flex","align-items-center","justify-content-between"],[1,"text-main","h5"],[1,"btn","btn-outline-danger",3,"click","disabled"],[1,"row","my-3","py-3","bg-main-light","rounded-4","shadow"],[1,"btn-main","my-2","w-100","rounded-4",3,"routerLink"],[1,"col-md-1"],[1,"w-100",3,"src","alt"],[1,"col-md-11","mt-3","mt-lg-0","d-flex","align-items-center","justify-content-between"],[1,"h4"],[1,"c-p",3,"click"],[1,"fa-regular","fa-trash-can","text-main"],[1,"d-flex","align-items-center","justify-content-center","gap-2"],[1,"text-main","c-p",3,"click"],[1,"fa-solid","fa-circle-plus","fa-lg"],[1,"fa-solid","fa-circle-minus","fa-lg"],[1,"text-center","text-main","d-flex","flex-column","gap-5","my-4","py-5"],[1,"fw-bold"],["routerLink","/home",1,"btn-main","w-100","rounded-4"]],template:function(i,n){i&1&&(a(0,"section",0)(1,"h1"),c(2),l(3,"translate"),r(),B(4,ot,13,17)(5,rt,7,6),r()),i&2&&(o(2),p("",d(3,2,"cart.Shopping Cart")," :"),o(2),R(4,n.getCart.totalCartPrice>0?4:5))},dependencies:[F,J,K,W,U,N],styles:["@media (max-width: 500px){h1[_ngcontent-%COMP%]{font-size:20px}.cart[_ngcontent-%COMP%]{width:100%!important}.total-price[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;width:100%}.total-price[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{width:50%;font-size:15px}.total-price[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:50%}}"]})}}return e})();export{Yt as CartComponent};
